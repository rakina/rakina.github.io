<!DOCTYPE HTML>
<head>
<script>
  let shownCounter = 0;
  window.addEventListener('pageshow', (e) => {
    document.getElementById('persistedValue').innerText = e.persisted;
    document.getElementById('shownValue').innerText = shownCounter;
    shownCounter++;
    if (e.persisted) {
      document.body.innerHTML += "<div>line added because of e.persisted</div>"
    }
  });
  let bcs = [];
  function addBlockingFeature() {
      
    bcs.push(new BroadcastChannel("internal_notification" + shownCounter));
  }
</script>
<style>
#rotating-div {
  width: 100px;
  height: 100px;
  background-color: #0CB1C4;
  animation-name: spin;
  animation-duration: 5000ms;
  animation-iteration-count: infinite;
  animation-timing-function: linear; 
  /* transform: rotate(3deg); */
   /* transform: rotate(0.3rad);/ */
   /* transform: rotate(3grad); */ 
   /* transform: rotate(.03turn);  */
}

@keyframes spin {
    from {
        transform:rotate(0deg);
    }
    to {
        transform:rotate(360deg);
    }
}
</style>
</head>
<body>
  <div id="rotating-div"></div>
  <h1>BFCache test page</h1>
  <ul style="font-size: 40pt">
    <li> Latest pageshow persisted value: <b id='persistedValue'>false</b>.</li>
    <li> This document has been loaded <b id='shownValue'>N</b> times before.</li>
    <li> NotRestoredReasons: <b style="font-size: 30pt"  id='nrrValue'></b> </li>
  </ul>
  <button  style="font-size: 20pt" onclick="history.back();">Go back</button>
  <button  style="font-size: 20pt" onclick="history.forward();">Go forward</button>
  <button   style="font-size: 20pt" onclick="location.href='bfcache.html';">Go to bfcache.html</button>
  <button   style="font-size: 20pt" onclick="location.href='bfcache2.html';">Go to bfcache2.html</button>
  <button   style="font-size: 20pt" onclick="addBlockingFeature()">Add BFCache blocking feature</button>
  <script>
	  for (let navEntry of  performance.getEntriesByType('navigation')) {
	  	let nrr = navEntry.notRestoredReasons;
	  	document.getElementById('nrrValue').innerHTML += "<p>"+ JSON.stringify(nrr) + "</p>";
	  }

  </script>
</body>
